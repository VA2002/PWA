<html>
  <head>
    <!--Title-->
    <title>Pet Store</title>
    <!--Connecting to CSS-->
    <link rel="stylesheet" href="styles.css" />
    <!--Vue JS CDN-->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.7.14/dist/vue.js"></script>
    <!--Font Awesome CDN-->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
    />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
    <script
      defer
      src="https://use.fontawesome.com/releases/v5.15.4/js/all.js"
    ></script>
    <style>
        .product {
            border: 1px grey solid;
            padding: 20px;
            margin: 20px;
            text-align: center;
        }
    </style>
  </head>
  <body>
    <div id="app">
      <div v-if="showProduct">
        <div v-for="product in products">
          <header>
            <button @click="showCheckout">
              {{ cartItemCount }}
              <i class="fa-solid fa-cart-plus"></i> Checkout
            </button>
          </header>
          <header>
            <h1>{{ sitename }}</h1>
          </header>
          <div class = "product">
          <img v-bind:src="product.img" />
          <p v-html="product.desc"></p>
          $ <span v-text="product.price"></span>
          <br />
          <div>{{ product.availableInventory - cartItemCount }} left</div>
          <br /><br />
          <button @click="addToCart(product)" v-if="canAddToCart">
            Add to Cart
          </button>
          <span v-if="product.availableInventory === cartItemCount">
            Sold Out
          </span>
          <span v-else-if="product.availableInventory - cartItemCount < 5">
            Only {{ product.availableInventory - cartItemCount }} left! Hurry!
          </span>
          <span v-else>
            Buy now!
          </span>
          <!-- <div>
            <span v-for = "n in product.rating">★</span>
            <span v-for = "n in 5-product.rating">☆</span>
        </div> -->
          <br />
          <button disabled="disabled" v-else>Sold Out</button>
          <div>
            <span v-for="n in product.rating">★</span>
            <span v-for="n in 5-product.rating">☆</span>
          </div>
          </div>
        </div>
      </div>
      <div v-else>
        <button @click="showCheckout">
          {{ cartItemCount }}
          <i class="fa-solid fa-cart-plus"></i> Checkout
        </button>
        <h1>Checkout</h1>
        <p>
          <b>First Name:</b>
          <input v-model.trim="order.firstName" />
        </p>
        <p>
          <b>Last Name:</b>
          <input v-model.trim="order.lastName" />
        </p>
        <p>
          <b>Address:</b>
          <input v-model="order.address" />
        </p>
        <p>
          <b>City:</b>
          <input v-model="order.city" />
        </p>
        <p>
          <b>State:</b>
          <select v-model="order.state">
            <option disabled value="">Choose Your State</option>
            <option v-for="(state, key) in states" v-bind:value="state">
              {{ key }}
            </option>
            <!-- <option v-bind:value = "states.AL">AL</option>
            <option v-bind:value = "states.AR">AR</option>
            <option v-bind:value = "states.CA">CA</option>
            <option v-bind:value = "states.NV">NV</option> -->
          </select>
        </p>
        <p>
          <b>Zip/Postal Code:</b>
          <input v-model.number="order.zip" type="number" />
        </p>
        <p>
          <input
            type="checkbox"
            id="gift"
            value="true"
            v-model="order.gift"
            v-bind:true-value="order.sendGift"
            v-bind:false-value="order.dontSendGift"
          />
          <label for="gift">Ship as Gift?</label>
        </p>
        <p>
          <input type="radio" id="home" value="Home" v-model="order.method" />
          <label for="home">Home</label>
          <input
            type="radio"
            id="business"
            value="Business"
            v-model="order.method"
          />
          <label for="business">Business</label>
        </p>
        <h3>Order Info:</h3>
        <p>First Name: {{ order.firstName }}</p>
        <p>Last Name: {{ order.lastName }}</p>
        <p>Address: {{ order.address }}</p>
        <p>City: {{ order.city }}</p>
        <p>State: {{ order.state }}</p>
        <p>Method: {{ order.method }}</p>
        <p>{{ order.gift }}</p>
        <br />
        <button @click="submitForm">Order</button>
      </div>
    </div>
    <script src="product.js"></script>
    <script type="text/javascript">
      var webstore = new Vue({
        el: "#app",
        data: {
          sitename: "VueJS Pet Depot",
          showProduct: true,
          order: {
            firstName: "",
            lastName: "",
            address: "",
            city: "",
            state: "",
            zip: "",
            gift: "",
            sendGift: "Send as a gift",
            dontSendGift: "Don't send as a gift",
            method: "Home"
          },
          states: {
            AL: "Alaska",
            AR: "Arizona",
            CA: "California",
            NV: "Nevada",
            OH: "Ohio",
            SA: "Samoa"
          },
          product: products,
          cart: []
        },
        methods: {
          addToCart: function() {
            console.log("Test");
            this.cart.push(sproduct.id);
          },
          showCheckout() {
            this.showProduct = this.showProduct ? false : true;
            console.log(this.showProduct);
          },
          submitForm() {
            alert("Done");
          }
        },
        computed: {
          cartItemCount: function() {
            return this.cart.length;
          },
          canAddToCart: function() {
            return (
              this.product.availableInventory > this.cartItemCount(product.id)
            );
          }
        }
      });
    </script>
  </body>
</html>
